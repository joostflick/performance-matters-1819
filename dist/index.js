const express=require("express"),path=require("path"),app=express(),port=3e3,XMLHttpRequest=require("xmlhttprequest").XMLHttpRequest;app.use(express.static(path.join(__dirname,"/public/"))),app.set("view engine","ejs"),app.set("views",path.join(__dirname,"/public/views")),app.get("/",(a,b)=>api.getAll().then(a=>{const c=a[0],d=a[1];for(let b=0;b<d.length;b++)c[b].insult=d[b],c[b].id=b;b.render("pages/index",{names:c})})),app.get("/details/:id",(a,b)=>api.getDetails(a.params.id).then(c=>b.render("pages/details",{data:c[a.params.id]}))),app.get("*",function(a,b){b.status(404).send("404 - This page can not be found, maybe try something else?")}),app.listen(port,()=>console.log(`Example app listening on port ${port}!`));const api={getAll:()=>Promise.all([api.loadNames,api.loadInsults]),getDetails:()=>api.loadNames,loadInsults:new Promise(function(a,b){const c=new XMLHttpRequest;c.open("GET","https://api.whatdoestrumpthink.com/api/v1/quotes",!0),c.onload=()=>{if(200<=c.status&&400>c.status){const b=JSON.parse(c.responseText);a(b.messages.personalized)}else b(error)},c.onerror=()=>{console.log("insults gaat fout")},c.send()}),loadNames:new Promise(function(a,b){const c=new XMLHttpRequest;c.open("GET","https://randomuser.me/api/?results=573",!0),c.onload=()=>{if(200<=c.status&&400>c.status){const b=JSON.parse(c.responseText),d=b.results.map(a=>({name:a.name.first.charAt(0).toUpperCase()+a.name.first.slice(1),lastName:a.name.last.charAt(0).toUpperCase()+a.name.last.slice(1),title:a.name.title,email:a.email,cellphone:a.cell,gender:a.gender,picture:a.picture,location:a.location}));a(d)}else b(error),console.log("names gaat fout")},c.onerror=()=>{},c.send()})};